<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>결제창</title>
</head>
<body>
    <nav>
        <div>
            <span>SSRCPay | 결제</span>
        </div>
    </nav>
    <br>
    <br>
    <div>
        <div>
            <div>
                <div>구독 서비스</div>
                <ul>
                    <li>
                        <div>
                            <div>
                                <input type="checkbox" id="agreeall">
                                <label for="agreeall">
                                    <b>전체 동의하기</b>
                                </label>
                            </div>
                            <div>
                                <input class="agree" type="checkbox" id="agree1">
                                <label for="agree1">
                                    위 상품의 구매조건 확인 및 결제진행 동의
                                </label>
                            </div>
                            <div>
                                <input class="agree" type="checkbox" id="agree2">
                                <label for="agree2">
                                    거래정보 제공 동의(판매자 : SSRC)
                                </label>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div>
                <div>총 결제금액</div>
                <ul>
                    <li>
                        <h3>
                            <b>월 / 20,000원</b>
                        </h3>
                    </li>
                </ul>
            </div>
        </div>
        <br>
        <br>
        <div>
            <button id="pay" disabled>결제</button>
            <button id="no">취소</button>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('pay').addEventListener('click', function () {
            //window.opener.펑션명();
            //window.close();
            console.log('결제')
        });

        document.getElementById('no').addEventListener('click', function () {
            // window.opener.no();
            // window.close();
            console.log('취소')
        });

        function updateAgreeAllCheckbox() {
            const agree1Checked = document.getElementById('agree1').checked;
            const agree2Checked = document.getElementById('agree2').checked;
            const agreeAllCheckbox = document.getElementById('agreeall');
            const pay = document.getElementById('pay');

            if (agree1Checked && agree2Checked) {
                agreeAllCheckbox.checked = true;
                
            } else {
                agreeAllCheckbox.checked = false;
            }

            if (agreeAllCheckbox.checked) {
                pay.removeAttribute('disabled');
            }
            else if(agree1Checked && agree2Checked){
                pay.removeAttribute('disabled');
            } else {
                pay.setAttribute('disabled', '1');
            }
        }

        document.querySelectorAll('.agree').forEach(function (checkbox) {
            checkbox.addEventListener('click', updateAgreeAllCheckbox);
        });

        document.getElementById('agreeall').addEventListener('click', function () {
            const agreeAllChecked = this.checked;
            document.getElementById('agree1').checked = agreeAllChecked;
            document.getElementById('agree2').checked = agreeAllChecked;
            
            const pay = document.getElementById('pay');
            if (agreeAllChecked) {
                pay.removeAttribute('disabled');
            } else {
                pay.setAttribute('disabled', '1');
            }
        });
    });
    </script>
</body>
</html>
